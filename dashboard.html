<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cobalt Shield ‚Äî Ops Dashboard</title>
  <meta name="description" content="Mission + growth candles + cadence + projects + team + partners." />
  <link rel="canonical" href="https://cobalt-shield.com/dashboard.html">
  <link rel="stylesheet" href="style.css?v=18"><!-- keep your site styles -->

  <style>
    /* --- minimal extras to GUARANTEE visibility --- */
    .kpis{display:grid;grid-template-columns:repeat(5,minmax(140px,1fr));gap:12px}
    @media(max-width:1100px){.kpis{grid-template-columns:repeat(2,1fr)}}
    .kpi{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:14px;box-shadow:0 4px 10px rgba(0,0,0,.06)}
    .kpi .label{color:#6b7280;font-size:12px;text-transform:uppercase;letter-spacing:.8px}
    .kpi .value{font-size:24px;font-weight:900}
    .kpi .delta{font-size:12px;font-weight:700}
    .delta.up{color:#10b981}.delta.down{color:#ef4444}

    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:10px 8px;border-bottom:1px solid #e5e7eb;text-align:left}
    .table th{font-size:12px;color:#6b7280;text-transform:uppercase;letter-spacing:.8px}

    .progress{height:10px;background:#eef2f7;border-radius:999px;overflow:hidden;border:1px solid #e5e7eb}
    .bar{height:100%;background:#0f4c81}

    .toolbar{display:flex;gap:10px;align-items:center;justify-content:space-between;margin:10px 0}
    .toggle{display:inline-flex;align-items:center;gap:8px;font-weight:700}
    .toggle input{accent-color:#0f4c81}

    .grid-2{display:grid;grid-template-columns:2fr 1fr;gap:16px}
    @media(max-width:980px){.grid-2{grid-template-columns:1fr}}

    /* Chart canvases MUST have fixed visible height */
    .candles-wrap{height:320px; position:relative}
    .candles-wrap canvas{position:absolute; inset:0; width:100% !important; height:100% !important}
    .bar-wrap{height:260px; position:relative}
    .bar-wrap canvas{position:absolute; inset:0; width:100% !important; height:100% !important}

    .chip{display:inline-flex;align-items:center;border-radius:999px;padding:4px 10px;font-size:12px;border:1px solid #e5e7eb;background:#fff}
    .chip.ok{background:#ecfdf5;border-color:#bbf7d0}
    .chip.warn{background:#fffbeb;border-color:#fde68a}
    .chip.bad{background:#fef2f2;border-color:#fecaca}

    @media print{
      .nav,.stickybar,.nav__burger,.btn{display:none!important}
      body{background:#fff}
      .card{box-shadow:none}
      .hero{padding:0 0 8px}
      .section{padding:14px 0}
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="nav">
    <div class="container nav__inner">
      <a href="/" class="brand">Cobalt<span>Shield</span></a>
      <nav class="nav__links" id="navLinks">
        <a href="/#mission">Home</a>
        <a href="/#impact">Impact</a>
        <a href="/#services">Services</a>
        <a href="/dashboard.html" class="pill">Dashboard</a>
        <a href="/#contact">Contact</a>
      </nav>
      <button class="nav__burger" id="burger" aria-label="Toggle menu">‚ò∞</button>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="container hero__content">
      <h1>Operations Dashboard</h1>
      <p class="muted">Mission + progress in one view ‚Äî updated weekly. <span id="lastUpdated"></span></p>
      <div class="hero__cta">
        <a href="tel:+306986761215" class="btn btn--call">üìû Call</a>
        <a href="https://wa.me/306986761215" target="_blank" class="btn btn--whatsapp" rel="noopener">WhatsApp</a>
        <button class="btn" id="exportBtn">Export PDF</button>
      </div>
    </div>
  </section>

  <main class="section">
    <div class="container">

      <!-- Mission -->
      <section class="card" style="margin-bottom:16px">
        <h2 style="margin:0 0 6px">Mission</h2>
        <p class="muted" style="margin:0 0 10px">From the classroom to the charging station ‚Äî practical protection, calm guidance, zero data resale.</p>
        <ul class="chips" style="margin:0">
          <li>Open playbooks</li><li>Human support</li><li>Privacy by default</li><li>Africa ‚Üî Europe bridge</li>
        </ul>
      </section>

      <!-- Toolbar -->
      <div class="toolbar">
        <div class="muted small">Names hidden by default</div>
        <label class="toggle"><input type="checkbox" id="nameToggle"> Show names</label>
      </div>

      <!-- KPIs -->
      <div class="kpis" id="kpiWrap"></div>

      <!-- Charts + Support -->
      <div class="grid-2" style="margin-top:16px">
        <article class="card">
          <h3>Growth Candles (Monthly)</h3>
          <p class="muted small" style="margin-top:-6px">Open‚ÄìHigh‚ÄìLow‚ÄìClose (no plugin).</p>
          <div class="candles-wrap"><canvas id="growthCandles"></canvas></div>

          <h3 style="margin-top:18px">Cadence (Meetings / Week)</h3>
          <div class="bar-wrap"><canvas id="cadenceChart"></canvas></div>
        </article>

        <aside class="card" id="support">
          <h3>Support the Work</h3>
          <p class="muted">Your contribution powers digital-safety education and clean-energy literacy.</p>
          <form action="https://www.paypal.com/donate" method="post" target="_blank" rel="noopener" style="margin-top:6px">
            <input type="hidden" name="hosted_button_id" value="KM9T7T9C9SSX6">
            <button type="submit" class="btn btn--ghost" style="width:100%">Donate with PayPal</button>
          </form>
          <p class="small muted" style="margin-top:10px">Need a receipt or prefer bank transfer? Email <a href="mailto:delphin@cobalt-shield.com">delphin@cobalt-shield.com</a>.</p>
        </aside>
      </div>

      <!-- Projects + Team -->
      <div class="grid" style="margin-top:16px">
        <article class="card" style="grid-column:span 2 / span 2">
          <h3>Projects ‚Äî Ongoing Progress</h3>
          <div id="projectsList"></div>
        </article>
        <article class="card" style="grid-column:span 2 / span 2">
          <h3>Team ‚Äî Velocity & Load</h3>
          <table class="table" id="teamTable">
            <thead><tr><th>Member</th><th>Role</th><th>Velocity</th><th>Open</th><th>On-time %</th><th>Focus</th></tr></thead>
            <tbody></tbody>
          </table>
        </article>
      </div>

      <!-- Partners -->
      <article class="card" style="margin-top:16px">
        <h3>Partner Teams</h3>
        <table class="table" id="partnerTable">
          <thead><tr><th>Partner</th><th>POC</th><th>Scope</th><th>Open Items</th><th>Status</th></tr></thead>
          <tbody></tbody>
        </table>
      </article>

    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>¬© <span id="year"></span> Cobalt Shield Initiative ‚Äî Africa Forward. Loyalty Over Everything.</p>
    </div>
  </footer>

  <div class="stickybar">
    <a href="tel:+306986761215">üìû Call</a>
    <a href="https://wa.me/306986761215" target="_blank" rel="noopener">üü¢ WhatsApp</a>
    <a href="mailto:delphin@cobalt-shield.com">‚úâÔ∏è Email</a>
  </div>

  <!-- Core Chart.js only -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script>
    // Base UI
    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('burger').onclick = () =>
      document.getElementById('navLinks').classList.toggle('open');
    document.getElementById('exportBtn').onclick = () => window.print();

    let SHOW_NAMES = false;
    document.getElementById('nameToggle').onchange = e => {
      SHOW_NAMES = e.target.checked; renderTeam(); renderPartners();
    };
    const safeName = (full, i) => SHOW_NAMES ? full : ["Member A","Member B","Member C","Member D","Member E"][i%5];
    const $ = (s,r=document)=>r.querySelector(s);

    /* ===== DATA ===== */
    const DATA = {
      meta: { lastUpdated: "2025-08-31 21:00 EEST" },
      kpis: [
        { label: "Total Meetings (MTD)", value: 18, delta: +20 },
        { label: "Open Actions", value: 32, delta: -10 },
        { label: "Closed Actions (MTD)", value: 64, delta: +12 },
        { label: "On-time Delivery", value: "92%", delta: +3 },
        { label: "Growth Index", value: "78/100", delta: +6 },
      ],
      months: ["Mar","Apr","May","Jun","Jul","Aug"],
      ohlc: [
        {o:26,h:30,l:22,c:28},
        {o:28,h:36,l:27,c:34},
        {o:34,h:40,l:31,c:38},
        {o:38,h:47,l:36,c:45},
        {o:45,h:52,l:44,c:49},
        {o:49,h:60,l:48,c:58}
      ],
      cadenceWeekly: { labels: ["Wk22","Wk23","Wk24","Wk25","Wk26","Wk27","Wk28","Wk29","Wk30","Wk31","Wk32","Wk33","Wk34"], values: [6,5,7,8,5,9,7,6,8,10,11,9,12] },
      projects: [
        { name: "Website v1 polish", pct: 72, status: "on-track" },
        { name: "Email & MX hardening", pct: 60, status: "on-track" },
        { name: "Rwanda school outreach (pilot)", pct: 35, status: "at-risk" },
        { name: "Funding deck (v2)", pct: 40, status: "slipping" }
      ],
      team: [
        { name: "Delphin Hakizimana", role: "CEO / Ops", velocity: 32, open: 14, ontime: 95, focus: "High" },
        { name: "Mixalis", role: "Local EU Outreach", velocity: 18, open: 5, ontime: 88, focus: "Med" },
        { name: "Panagiotis", role: "Advisor", velocity: 9, open: 2, ontime: 92, focus: "Low" },
        { name: "Shalom", role: "Research Trainer", velocity: 14, open: 6, ontime: 86, focus: "Med" }
      ],
      partnerTeams: [
        { partner: "Ionity (MSP context)", poc: "TBD", scope: "Charging support / MSP alignment", open: 3, status: "active" },
        { partner: "Electra", poc: "TBD", scope: "EV support operations", open: 2, status: "active" },
        { partner: "Spark Alliance", poc: "TBD", scope: "Fast-charging pricing & guidance", open: 4, status: "pending" }
      ]
    };

    // KPIs
    (function setKPIs(){
      const wrap = $("#kpiWrap"); wrap.innerHTML = "";
      DATA.kpis.forEach(k=>{
        const d = typeof k.delta==="number" ? k.delta : 0;
        wrap.insertAdjacentHTML("beforeend",
          `<div class="kpi">
            <div class="label">${k.label}</div>
            <div class="value">${k.value}</div>
            <div class="delta ${d>=0?'up':'down'}">${d>=0?'+':''}${d}% vs prev</div>
          </div>`);
      });
      $("#lastUpdated").textContent = "¬∑ Updated " + DATA.meta.lastUpdated;
    })();

    // ---- Candles with floating bars (fat + guaranteed visible) ----
    function drawCandles(canvas, labels, ohlc){
      const wicks = ohlc.map((v,i)=>({ x: labels[i], y: [v.l, v.h] }));
      const bodies= ohlc.map((v,i)=>({
        x: labels[i],
        y: [Math.min(v.o,v.c), Math.max(v.o,v.c)],
        up: v.c >= v.o
      }));

      new Chart(canvas.getContext('2d'), {
        type: 'bar',
        data: {
          labels,
          datasets: [
            { // thin gray wicks
              type:'bar', data:wicks, label:'Wick',
              backgroundColor:'rgba(0,0,0,0)',
              borderColor:'#6b7280', borderWidth:2, borderSkipped:false,
              barThickness: 2, order:1
            },
            { // fat body
              type:'bar', data:bodies, label:'Body',
              backgroundColor: ctx => ctx.raw.up ? '#10b981' : '#ef4444',
              borderColor:     ctx => ctx.raw.up ? '#10b981' : '#ef4444',
              borderWidth:1, borderSkipped:false,
              barThickness: 18, order:2
            }
          ]
        },
        options: {
          responsive:true, maintainAspectRatio:false,
          plugins:{ legend:{ display:false } },
          scales:{ x:{type:'category'}, y:{beginAtZero:false, suggestedMin:0} }
        }
      });
    }

    // Charts
    (function charts(){
      drawCandles(document.getElementById('growthCandles'), DATA.months, DATA.ohlc);

      new Chart(document.getElementById('cadenceChart').getContext('2d'), {
        type:'bar',
        data:{ labels: DATA.cadenceWeekly.labels, datasets:[{ label:'Meetings', data: DATA.cadenceWeekly.values }]},
        options:{ plugins:{legend:{display:false}}, scales:{ y:{ beginAtZero:true } } }
      });
    })();

    // Projects
    (function renderProjects(){
      const list = $("#projectsList"); list.innerHTML = "";
      DATA.projects.forEach(p=>{
        const lvl = p.status==="on-track"?"ok":(p.status==="at-risk"?"warn":"bad");
        list.insertAdjacentHTML("beforeend",
          `<div class="card" style="padding:12px;margin-bottom:10px">
            <div style="display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap">
              <strong>${p.name}</strong>
              <span class="chip ${lvl}">${p.status}</span>
              <span class="small muted">${p.pct}%</span>
            </div>
            <div class="progress" style="margin-top:8px"><div class="bar" style="width:${p.pct}%"></div></div>
          </div>`);
      });
    })();

    // Team
    function renderTeam(){
      const tbody = $("#teamTable tbody"); tbody.innerHTML = "";
      DATA.team.forEach((m,i)=>{
        tbody.insertAdjacentHTML("beforeend",
          `<tr><td>${safeName(m.name,i)}</td><td>${m.role}</td><td>${m.velocity}</td><td>${m.open}</td><td>${m.ontime}%</td><td>${m.focus}</td></tr>`);
      });
    } renderTeam();

    // Partners
    function renderPartners(){
      const tbody = $("#partnerTable tbody"); tbody.innerHTML = "";
      DATA.partnerTeams.forEach(p=>{
        const chip = p.status==="active"?"ok":(p.status==="pending"?"warn":"bad");
        tbody.insertAdjacentHTML("beforeend",
          `<tr><td>${p.partner}</td>
               <td>${SHOW_NAMES ? (p.poc||"") : (p.poc ? "POC" : "")}</td>
               <td>${p.scope}</td><td>${p.open}</td>
               <td><span class="chip ${chip}">${p.status}</span></td></tr>`);
      });
    } renderPartners();
  </script>
</body>
</html>
